<html>
    <head>
        <script
            type="text/javascript"
            src="../../../js/jquery-1.4.2.min.js">
        </script>
        <script
            type="text/javascript"
            src="../../../syntax_highlighter/scripts/shCore.js">
        </script>
        <script
            type="text/javascript"
            src="../../../syntax_highlighter/scripts/shBrushJScript.js">
        </script>
        <script
            type="text/javascript"
            src="../../../syntax_highlighter/scripts/shBrushPhp.js">
        </script>
        <script
            type="text/javascript"
            src="../../../syntax_highlighter/scripts/shBrushXml.js">
        </script>
        <link
            href="../../../syntax_highlighter/styles/shCore.css" rel="stylesheet"
            type="text/css"
        />
        <link
            href="../../../syntax_highlighter/styles/shCoreEclipse.css"
            rel="stylesheet" type="text/css"
        />
        <link
            href="../../../syntax_highlighter/styles/shThemeWordpress.css"
            rel="stylesheet" type="text/css"
        />
    </head>
    <body>
        <pre class="brush: php">&lt;?php
/**
 * @author Jefferson Uchoa Ponte
 * @version 1.0
 * @copyright UNILAB - Universidade da Integracao Internacional da Lusofonia Afro-Brasileira.
 * @package Util
 */

   /*
    * Legenda para tipos de Campos:
    *   MAIL = 1,
    *   PASS = 2,
    *   TEXT = 3,
    *   ENDERECO = 4,
    *   NUMERICO = 5,
    *   MATRICULA = 6
    *   CPF = 7
    *   Data = 8
    *   MAC = 9
    *   cep = 10
    *   valida_fone = 11
    *   login = 12
   */   

class Validacoes{
    
	/**
	 * 
	 * @var unknown
	 */
    private $expressao;
    
    /**
     * 
     * @var unknown
     */
    private $tipoCampo =  array(1,2,3,4,5,6,7,8,9,10,11,12);

	/**
	 * 
	 * @param int $tipo_campo
	 * @param string $valor
	 */
    public function validaCampos($tipo_campo, $valor){

        if(!in_array($tipo_campo,$this-&gt;tipoCampo)){

            echo &quot;&lt;pre style='color:#f00;'&gt;Tipo de campo inv&Atilde;&fnof;&Acirc;&iexcl;lido.&lt;/pre&gt;&quot;;

        }else{

            switch ($tipo_campo) {
                case 1:
                   return $this-&gt;valida_mail($valor);
                    break;
                case 2:
                    return $this-&gt;valida_senha($valor);
                    break;
                case 3:
                    return $this-&gt;valida_text($valor);
                    break;
                case 4:
                    return $this-&gt;valida_endereco($valor);
                    break;
                
                case 6:
                    return $this-&gt;valida_matricula($valor);
                    break;
                
                case 7:
                    return $this-&gt;valida_CPF($valor);
                    break;
                
                case 8:
                    return $this-&gt;valida_data($valor);
                    break;
                case 9:
                    return $this-&gt;valida_mac($valor);
                    break;
                case 10:
                    return $this-&gt;valida_cep($valor);
                    break;
                case 11:
                    return $this-&gt;valida_fone($valor);
                    break;
                case 12:
                    return $this-&gt;valida_login($valor);
                    break;
                default:
                    echo &quot;N&atilde;o foi possivel realizar a valida&ccedil;&atilde;o do campo &quot;.$tipo_campo;
                    break;
            }
        }
    }

	/**
	 * 
	 * @param string $matricula
	 * @param int $tam_max
	 */
    private function valida_matricula($matricula,$tam_max = 11){
       
        if(empty($matricula)){
            return FALSE;
        }else if (!is_numeric($matricula)) {
            return FALSE;
        }else if (strlen($matricula) &gt; $tam_max) {
            return FALSE;
        }else{
            return TRUE;
        }

    }

	/**
	 * 
	 * @param string $email
	 */
    private function valida_mail($email){

        if($email == &quot;&quot;){
            return FALSE;
        }
        else if(!filter_var($email, FILTER_VALIDATE_EMAIL)){
            return FALSE;
        }
        else{
            return TRUE;
        }
    }
    
    /**
     * 
     * @param string $strText
     * @return boolean
     */
    private function valida_text($strText){
        
        $erro=FALSE;
        $conversao = array('&Atilde;&fnof;&Acirc;&iexcl;' =&gt; 'a','&Atilde;&fnof;&Acirc;&nbsp;' =&gt; 'a','&Atilde;&fnof;&Acirc;&pound;' =&gt; 'a','&Atilde;&fnof;&Acirc;&cent;' =&gt; 'a', '&Atilde;&fnof;&Acirc;&copy;' =&gt; 'e',
         '&Atilde;&fnof;&Acirc;&ordf;' =&gt; 'e', '&Atilde;&fnof;&Acirc;&shy;' =&gt; 'i', '&Atilde;&fnof;&Acirc;&macr;'=&gt;'i', '&Atilde;&fnof;&Acirc;&sup3;' =&gt; 'o', '&Atilde;&fnof;&Acirc;&acute;' =&gt; 'o', '&Atilde;&fnof;&Acirc;&micro;' =&gt; 'o', &quot;&Atilde;&fnof;&Acirc;&para;&quot;=&gt;&quot;o&quot;,
         '&Atilde;&fnof;&Acirc;&ordm;' =&gt; 'u', '&Atilde;&fnof;&Acirc;&frac14;' =&gt; 'u', '&Atilde;&fnof;&Acirc;&sect;' =&gt; 'c', '&Atilde;&fnof;&Acirc;&plusmn;'=&gt;'n', '&Atilde;&fnof;&iuml;&iquest;&frac12;' =&gt; 'A', '&Atilde;&fnof;&acirc;&sbquo;&not;' =&gt; 'A', '&Atilde;&fnof;&AElig;&rsquo;' =&gt; 'A',
         '&Atilde;&fnof;&acirc;&euro;&scaron;' =&gt; 'A', '&Atilde;&fnof;&acirc;&euro;&deg;' =&gt; 'E', '&Atilde;&fnof;&Aring;&nbsp;' =&gt; 'E', '&Atilde;&fnof;&iuml;&iquest;&frac12;' =&gt; 'I', '&Atilde;&fnof;&iuml;&iquest;&frac12;'=&gt;'I', &quot;&Atilde;&fnof;&acirc;&euro;&ldquo;&quot;=&gt;&quot;O&quot;, '&Atilde;&fnof;&acirc;&euro;&oelig;' =&gt; 'O',
         '&Atilde;&fnof;&acirc;&euro;�' =&gt; 'O', '&Atilde;&fnof;&acirc;&euro;&cent;' =&gt; 'O', '&Atilde;&fnof;&Aring;&iexcl;' =&gt; 'U', '&Atilde;&fnof;&Aring;&ldquo;' =&gt; 'U', '&Atilde;&fnof;&acirc;&euro;&iexcl;' =&gt;'C', '&Atilde;&fnof;&acirc;&euro;&tilde;'=&gt;'N');
        
        $text=(trim($strText));
        $text=str_replace(&quot; &quot;,&quot;&quot;,$text);
        $text = strtr($text, $conversao);
        if(!ctype_alnum($text)){
            return FALSE;
	 
	 }
         else{ 
            $nome_valida = array (0=&gt;48,1=&gt;49,2=&gt;50,3=&gt;51,4=&gt;52,5=&gt;53,6=&gt;54,7=&gt;55,8=&gt;56,9=&gt;57,);
                   $str = $text;
                   $long = strlen ($str)-1;
                   for ($i = 0; $i &lt;= $long; $i++) {
                           for ($x = 0; $x &lt; count($nome_valida); $x++) {
                                   if (ord ($str[$i]) == $nome_valida[$x]) {
                                       
                                       $erro = true;
                                   }

                           }
                   }
	}
	if ($erro) {
		 
		return FALSE;
	}
       
        
        else if($strText == &quot;&quot;){
            return FALSE;
        }
       
        else{
            return TRUE;
        }
    }
    
    /**
     * 
     * @param string $senha
     * @param int $tam_min
     * @return boolean
     */
    private function valida_senha($senha,$tam_min = 6){
        
        if($senha == &quot;&quot;){
            return FALSE;
        }
        else if(strlen ($senha) &lt; $tam_min){
            return FALSE;
        }
        else{
            return TRUE;
        }
    }
    
    /**
     * 
     * @param string $strText
     * @return boolean
     */
    private function valida_endereco($strText){
        
        
        $conversao = array('&Atilde;&fnof;&Acirc;&iexcl;' =&gt; 'a','&Atilde;&fnof;&Acirc;&nbsp;' =&gt; 'a','&Atilde;&fnof;&Acirc;&pound;' =&gt; 'a','&Atilde;&fnof;&Acirc;&cent;' =&gt; 'a', '&Atilde;&fnof;&Acirc;&copy;' =&gt; 'e',
         '&Atilde;&fnof;&Acirc;&ordf;' =&gt; 'e', '&Atilde;&fnof;&Acirc;&shy;' =&gt; 'i', '&Atilde;&fnof;&Acirc;&macr;'=&gt;'i', '&Atilde;&fnof;&Acirc;&sup3;' =&gt; 'o', '&Atilde;&fnof;&Acirc;&acute;' =&gt; 'o', '&Atilde;&fnof;&Acirc;&micro;' =&gt; 'o', &quot;&Atilde;&fnof;&Acirc;&para;&quot;=&gt;&quot;o&quot;,
         '&Atilde;&fnof;&Acirc;&ordm;' =&gt; 'u', '&Atilde;&fnof;&Acirc;&frac14;' =&gt; 'u', '&Atilde;&fnof;&Acirc;&sect;' =&gt; 'c', '&Atilde;&fnof;&Acirc;&plusmn;'=&gt;'n', '&Atilde;&fnof;&iuml;&iquest;&frac12;' =&gt; 'A', '&Atilde;&fnof;&acirc;&sbquo;&not;' =&gt; 'A', '&Atilde;&fnof;&AElig;&rsquo;' =&gt; 'A',
         '&Atilde;&fnof;&acirc;&euro;&scaron;' =&gt; 'A', '&Atilde;&fnof;&acirc;&euro;&deg;' =&gt; 'E', '&Atilde;&fnof;&Aring;&nbsp;' =&gt; 'E', '&Atilde;&fnof;&iuml;&iquest;&frac12;' =&gt; 'I', '&Atilde;&fnof;&iuml;&iquest;&frac12;'=&gt;'I', &quot;&Atilde;&fnof;&acirc;&euro;&ldquo;&quot;=&gt;&quot;O&quot;, '&Atilde;&fnof;&acirc;&euro;&oelig;' =&gt; 'O',
         '&Atilde;&fnof;&acirc;&euro;�' =&gt; 'O', '&Atilde;&fnof;&acirc;&euro;&cent;' =&gt; 'O', '&Atilde;&fnof;&Aring;&iexcl;' =&gt; 'U', '&Atilde;&fnof;&Aring;&ldquo;' =&gt; 'U', '&Atilde;&fnof;&acirc;&euro;&iexcl;' =&gt;'C', '&Atilde;&fnof;&acirc;&euro;&tilde;'=&gt;'N');
        
        $text=(trim($strText));
        $text=str_replace(&quot; &quot;,&quot;&quot;,$text);
        $text = strtr($text, $conversao);
        if(!ctype_alnum($text)){
            return FALSE;
	 
	 }else if($strText == &quot;&quot;){
             return FALSE;
         }else{
             return TRUE;
         }
    }
    
    /**
     * 
     * @param string $cpf
     * @return boolean
     */
    private function valida_CPF($cpf = null) {
        
        // Verifica se um n&Atilde;&fnof;&Acirc;&ordm;mero foi informado
        if(empty($cpf)) {
            return false;
        }

        // Elimina possivel mascara
        $cpf = ereg_replace('[^0-9]', '', $cpf);
        $cpf = str_pad($cpf, 11, '0', STR_PAD_LEFT);
        

        
        // Verifica se o numero de digitos informados &Atilde;&fnof;&Acirc;&copy; igual a 11 
        if (strlen($cpf) != 11) {
            return false;
        }
        // Verifica se nenhuma das sequ&Atilde;&fnof;&Acirc;&ordf;ncias invalidas abaixo 
        // foi digitada. Caso afirmativo, retorna falso
        else if ($cpf == '00000000000' || 
            $cpf == '11111111111' || 
            $cpf == '22222222222' || 
            $cpf == '33333333333' || 
            $cpf == '44444444444' || 
            $cpf == '55555555555' || 
            $cpf == '66666666666' || 
            $cpf == '77777777777' || 
            $cpf == '88888888888' || 
            $cpf == '99999999999') {
            return false;
         // Calcula os digitos verificadores para verificar se o
         // CPF &Atilde;&fnof;&Acirc;&copy; v&Atilde;&fnof;&Acirc;&iexcl;lido
         } else {   

            for ($t = 9; $t &lt; 11; $t++) {

                for ($d = 0, $c = 0; $c &lt; $t; $c++) {
                    $d += $cpf{$c} * (($t + 1) - $c);
                }
                $d = ((10 * $d) % 11) % 10;
                if ($cpf{$c} != $d) {
                    return false;
                }
            }

            return true;
        }
    }
    
    /**
     * 
     * @param string $date
     * @return boolean
     */
    private function valida_data($date) {

        if(empty($date)){            
            return FALSE;
        }else{

            $data = explode(&quot;-&quot;,$date); // fatia a string $dat em pedados, usando / como referencia
             $d = $data[0];
             $m = $data[1];
             $y = $data[2];
         
            // verifica se a data n&atilde;o v&aacute;lida!
            // 1 = true (v&aacute;lida)
            // 0 = false (inv&aacute;lida)
            $res = checkdate($d,$m,$y);

            if($d &gt; 31 || $m &gt; 12 || $y &lt; 1){
                return false;
            }else if ($res == 1){
                return TRUE;
            } else {
                return FALSE;
            }
        }
        
    }
	
    /**
     * 
     * @param string $ip
     */
    private function  valida_ip($ip){
        //print &quot;d&quot;;
        if(filter_var($ip, FILTER_VALIDATE_IP) === FALSE) {
            
            return FALSE;
        } else {
            return TRUE;
        }
        
        
    }

    /**
     * 
     * @param string $mac
     * @return boolean
     */
    private function valida_mac($mac) {
        if (strlen($mac) &gt; 17 or strlen($mac) &lt; 17 ){
            return FALSE;    
                   }
        else if (($mac[2] !=&quot;:&quot;) || ($mac[5] !=&quot;:&quot; ) || ($mac[8] !=&quot;:&quot;) || ($mac[11] !=&quot;:&quot; )|| ($mac[14] !=&quot;:&quot;)) {
            
            //print $mac;
            return FALSE;     
                        
        }
        $erro=TRUE;
        $M=$mac;
        $mac1=  str_replace(&quot;:&quot;, &quot;&quot;, $mac);
        $array = array (0=&gt;0,1=&gt;1,2=&gt;2,3=&gt;3,4=&gt;4,5=&gt;5,6=&gt;6,7=&gt;7,8=&gt;8,9=&gt;9,10=&gt;'A',11=&gt;'B',12=&gt;'C',13=&gt;'D',14=&gt;'E',15=&gt;'F');
        $str = $mac1;
        $long = strlen ($str);
        
                   
        for ($i = 0; $i &lt; $long; $i++) {
                                    //print &quot;contar&quot;.$str[$i];
                                    
            if  ($str[$i] == '0' || $str[$i] == '1' ||$str[$i] ==  '2' ||$str[$i] == '3' ||$str[$i] ==  '4' ||$str[$i] ==  '5' ||$str[$i] ==  '6' ||$str[$i] ==  '7' ||$str[$i] == '8' ||$str[$i] ==  '9' 
                ||$str[$i] ==  'A' ||$str[$i] ==  'B' ||$str[$i] == 'C'||$str[$i] ==  'D'||$str[$i] ==  'E' ||$str[$i] =='F' ) {
                //print $str.'\s';
                //print $i.&quot;\s&quot;;
                $erro = FALSE;
                //return FALSE;
                                       
            }
            else{
                $erro=TRUE;
                //return FALSE;
                //return FALSE;
            }

                           
        }
                   
        return TRUE;
	// verifica se a data &Atilde;&fnof;&Acirc;&copy; v&Atilde;&fnof;&Acirc;&iexcl;lida!
	// 1 = true (v&Atilde;&fnof;&Acirc;&iexcl;lida)
	// 0 = false (inv&Atilde;&fnof;&Acirc;&iexcl;lida)
	
    }
    
   
    function valida_fone($fone){
     if(!preg_match('^\(+[0-9]{2,3}\) [0-9]{4}-[0-9]{4}$^', $fone)){

       return FALSE;
     }
    else {
         return TRUE;
     }
       
    }
    
    function  valida_cep($cep){
        if(!preg_match(&quot;/^[0-9]{5}([-][0-9]{3})$/&quot;,$_POST[&quot;cep&quot;])){
            
            return FALSE;
        }
        else {
            return TRUE;
        }
        
    }
    function  valida_login($login){
        $long = strlen ($login);
        for ($i = 0; $i &lt; $long; $i++) {
            if($login[$i]=='&quot;' || $login[$i] =='@' || $login[$i]=='!' || $login[$i] =='#' || $login[$i]=='#' || $login[$i] =='$' || $login[$i]=='%' || $login[$i] =='&Atilde;&sbquo;&Acirc;&uml;' ||
            $login[$i]=='&amp;' || $login[$i] =='*' || $login[$i]=='(' || $login[$i] ==')' || $login[$i]=='+' || $login[$i] =='=' || $login[$i]=='/' || $login[$i] =='*' 
                    ){
                
                        return FALSE;
            }
       }
       
       return TRUE;
    }

    
}</pre>
        <script type="text/javascript">
             SyntaxHighlighter.all();
             jQuery('.gutter div').each(function(key, data){
                jQuery(data).prepend('<a name="L'+jQuery(data).text()+'"/>');
             });
        </script>
    </body>
</html>