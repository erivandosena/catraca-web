<html>
    <head>
        <script
            type="text/javascript"
            src="../../../js/jquery-1.4.2.min.js">
        </script>
        <script
            type="text/javascript"
            src="../../../syntax_highlighter/scripts/shCore.js">
        </script>
        <script
            type="text/javascript"
            src="../../../syntax_highlighter/scripts/shBrushJScript.js">
        </script>
        <script
            type="text/javascript"
            src="../../../syntax_highlighter/scripts/shBrushPhp.js">
        </script>
        <script
            type="text/javascript"
            src="../../../syntax_highlighter/scripts/shBrushXml.js">
        </script>
        <link
            href="../../../syntax_highlighter/styles/shCore.css" rel="stylesheet"
            type="text/css"
        />
        <link
            href="../../../syntax_highlighter/styles/shCoreEclipse.css"
            rel="stylesheet" type="text/css"
        />
        <link
            href="../../../syntax_highlighter/styles/shThemeWordpress.css"
            rel="stylesheet" type="text/css"
        />
    </head>
    <body>
        <pre class="brush: php">&lt;?php
/**
 * Classe utilizada para centralizar as demais Classes(DAO, Model, View, Util).
 * Esta classe ser&aacute; instaciada no index.php.
 * 
 * @author Jefferson Uchoa Ponte
 * @version 1.0
 * @copyright UNILAB - Universidade da Integracao Internacional da Lusofonia Afro-Brasileira.
 * @package Controle
 */
/**
 * 
 * Classe utilizada para controle do acesso do usu&aacute;rio,
 * nela cont&eacute;m a fun&ccedil;&atilde;o de login onde retornadr&aacute; o n&iacute;vel de acesso
 * do usu&aacute;rio, como tambem redirecionar&aacute; o usu&aacute;rio para a tela que
 * estela de acordo com o seu n&iacute;vel.
 *
 */
class UsuarioController {
	
	/**
	 * Metodo principal utilizada para controlar o acesso a classe atrav&eacute;s do n&iacute;vel de acesso do usuario.
	 *
	 * @param Sessao $nivelDeAcesso
	 *        	Recebe uma Sess&atilde;o que cont&eacute;m o n&iacute;vel de acesso do usuario,
	 *        	esta Sess&atilde;o &eacute; iniciada na p&aacute;gina principal, durante o login do usuario.
	 */
	public static function main($nivelDeAcesso) {
		switch ($nivelDeAcesso) {
			
			case Sessao::NIVEL_DESLOGADO :
				$usuarioController = new UsuarioController ();
				$usuarioController-&gt;telaLogin ();
				break;
			default :
				$sessao = new Sessao ();
				
				$usuario = new Usuario ();
				$usuario-&gt;setLogin ( $sessao-&gt;getLoginUsuario () );
				
				$usuarioDao = new UsuarioDAO ();
				
				$usuarioDao-&gt;preenchePorLogin ( $usuario );
				$nome = $usuario-&gt;getNome ();
				$lista = explode ( ' ', $nome );
				$nome = $lista [0];
				echo '&lt;p&gt;Ol&aacute;, ' . ucfirst ( strtolower ( $nome ) ) . '!&lt;/p&gt;
						&lt;p&gt;Visualize abaixo seus dados referentes ao Restaurante Universit&aacute;rio&lt;/p&gt;';				
				PessoalController::main ( $nivelDeAcesso );				
				break;
		}
	}
	
	/**
	 * Fun&ccedil;&atilde;o Utilizada para gerar a tela de login, e com os dados fornecidos por ela,
	 * atraves do usu&aacute;rio realizar a autentica&ccedil;&atilde;o do usu&aacute;rio no sistema.
	 * 
	 * Nela ser&aacute; criada uma Sess&atilde;o que ser&aacute; atribuido o n&iacute;vel de acesso do usu&aacute;rio, 
	 * de acordo com o banco de dados.
	 * 
	 * Por padr&atilde;o, durante o primeiro acesso &eacute; fornecido o nivel padr&atilde;o a todos os usu&aacute;rio.
	 */
	public function telaLogin() {
		$usuarioView = new UsuarioView ();
		$erro = FALSE;
		if (isset ( $_POST ['formlogin'] )) {
			
			$usuarioDAO = new UsuarioDAO ();
			$usuario = new Usuario ();
			$usuario-&gt;setLogin ( $_POST ['login'] );
			$usuario-&gt;setSenha ( $_POST ['senha'] );
			if ($usuarioDAO-&gt;autentica ( $usuario )) {				
				$sessao2 = new Sessao ();
				$sessao2-&gt;criaSessao ( $usuario-&gt;getId (), $usuario-&gt;getNivelAcesso (), $usuario-&gt;getLogin () );
				echo '&lt;meta http-equiv=&quot;refresh&quot; content=1;url=&quot;./index.php&quot;&gt;';
			} else {
				$msg_erro = &quot;Senha ou usu&aacute;rio Inv&aacute;lido&quot;;
				$erro = true;
				
				$usuarioView-&gt;mostraFormularioLogin ( $erro, $msg_erro );
				return;
			}
		}
		$usuarioView-&gt;mostraFormularioLogin ();
	}	
	
}
?&gt;</pre>
        <script type="text/javascript">
             SyntaxHighlighter.all();
             jQuery('.gutter div').each(function(key, data){
                jQuery(data).prepend('<a name="L'+jQuery(data).text()+'"/>');
             });
        </script>
    </body>
</html>