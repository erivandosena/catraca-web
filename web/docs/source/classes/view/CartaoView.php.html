<html>
    <head>
        <script
            type="text/javascript"
            src="../../../js/jquery-1.4.2.min.js">
        </script>
        <script
            type="text/javascript"
            src="../../../syntax_highlighter/scripts/shCore.js">
        </script>
        <script
            type="text/javascript"
            src="../../../syntax_highlighter/scripts/shBrushJScript.js">
        </script>
        <script
            type="text/javascript"
            src="../../../syntax_highlighter/scripts/shBrushPhp.js">
        </script>
        <script
            type="text/javascript"
            src="../../../syntax_highlighter/scripts/shBrushXml.js">
        </script>
        <link
            href="../../../syntax_highlighter/styles/shCore.css" rel="stylesheet"
            type="text/css"
        />
        <link
            href="../../../syntax_highlighter/styles/shCoreEclipse.css"
            rel="stylesheet" type="text/css"
        />
        <link
            href="../../../syntax_highlighter/styles/shThemeWordpress.css"
            rel="stylesheet" type="text/css"
        />
    </head>
    <body>
        <pre class="brush: php">&lt;?php
/**
 * Nesta Classe est&atilde;o contidos os C&oacute;digos HTML, respons&aacute;veis pela gera&ccedil;&atilde;o das Telas.
 * @author Jefferson Uchoa Ponte
 * @version 1.0
 * @copyright UNILAB - Universidade da Integracao Internacional da Lusofonia Afro-Brasileira.
 * @package View
 */
/**
 * Nesta Classe est&atilde;o contidos os C&oacute;digos HTML
 * respons&aacute;veis por gerar os elementos e as telas da p&aacute;gina de Cart&atilde;o Avulso.
 */
class CartaoView {
	
	/**
	 * Fun&ccedil;&atilde;o que gera o Formul&aacute;rio para busca pelo n&uacute;mero do cart&atilde;o.
	 */
	public function formBuscaCartao() {
		echo '	&lt;script&gt;
					$(document).bind(\'autofocus_ready\', function() {
				    	if (!(&quot;autofocus&quot; in document.createElement(&quot;input&quot;))) {
				      		$(&quot;#numero_cartao&quot;).focus();
				    	}
				  	});
				&lt;/script&gt;				
				&lt;div class=&quot;doze colunas borda&quot;&gt;
					&lt;form method=&quot;get&quot; action=&quot;&quot; class=&quot;formulario em-linha&quot; &gt;
						&lt;input type=&quot;hidden&quot; name=&quot;pagina&quot; value=&quot;cartao&quot; /&gt;
						&lt;label for=&quot;numero_cartao&quot;&gt;												
							Buscar por N&uacute;mero:&lt;input type=&quot;number&quot; name=&quot;numero_cartao&quot; id=&quot;numero_cartao&quot; autofocus /&gt;&lt;br&gt;
							&lt;script&gt;$(document).trigger(\'autofocus_ready\');&lt;/script&gt;
							&lt;input type=&quot;submit&quot; value=&quot;Buscar&quot; /&gt;
						&lt;/label&gt;		
					&lt;/form&gt;			
				&lt;/div&gt;';
	}
	
	/**
	 * Fun&ccedil;&atilde;o utilizada para mostar uma pesquisa realizada pelo n&uacute;mero do cart&atilde;o.
	 * Chama a fun&ccedil;&atilde;o mostraLinhaDaBuscaCartao dentro da mesma Classe,
	 * contendo o restante da tabela com os dados dos usu&aacute;rio.
	 *
	 * @param array $cartoes        	
	 */
	public function mostraResultadoBuscaDeCartoes($cartoes) {
		echo '	&lt;div class=&quot;doze linhas&quot;&gt;';
		echo '		&lt;br&gt;&lt;h2 class=&quot;texto-preto&quot;&gt;Busca de Cart&otilde;es:&lt;/h2&gt;';
		echo '	&lt;/div&gt;';
		echo '	&lt;div class=&quot;borda&quot;&gt;
					&lt;table class=&quot;tabela borda-vertical zebrada texto-preto&quot;&gt;
						&lt;thead&gt;
							&lt;tr&gt;
					            &lt;th&gt;Numero&lt;/th&gt;
					            &lt;th&gt;Cr&eacute;ditos&lt;/th&gt;
					            &lt;th&gt;Tipo de Usu&aacute;rio&lt;/th&gt;
					            &lt;th&gt;Selecionar&lt;/th&gt;
				        	&lt;/tr&gt;
				    	&lt;/thead&gt;
						&lt;tbody&gt;';
		foreach ( $cartoes as $cartao ) {
			$this-&gt;mostraLinhaDaBuscaCartao ( $cartao );
		}
		echo '			&lt;/tbody&gt;
					&lt;/table&gt;
				&lt;/div&gt;';
	}
	
	/**
	 * Fun&ccedil;&atilde;o ulilizada para gerar uma tabela com a pesquisa
	 * realizada com o n&uacute;mero do cart&atilde;o.
	 *
	 * @param Cartao $cartao        	
	 */
	public function mostraLinhaDaBuscaCartao(Cartao $cartao) {
		echo '&lt;tr&gt;';
		echo '	&lt;td&gt;' . $cartao-&gt;getNumero () . '&lt;/a&gt;&lt;/td&gt;';
		echo '	&lt;td&gt;' . $cartao-&gt;getCreditos () . '&lt;/td&gt;';
		echo '	&lt;td&gt;' . $cartao-&gt;getTipo ()-&gt;getNome () . '&lt;/td&gt;';
		echo '	&lt;td class=&quot;centralizado&quot;&gt;&lt;a href=&quot;?pagina=cartao&amp;cartaoselecionado=' . $cartao-&gt;getId () . '&quot;&gt;&lt;span class=&quot;icone-checkmark texto-verde2 botao&quot; title=&quot;Selecionar&quot;&gt;&lt;/span&gt;&lt;/a&gt;&lt;/td&gt;';
		echo '&lt;/tr&gt;';
	}
	
	/**
	 * Exibe o cart&atilde;o selecionado.
	 *
	 * @param Cartao $cartao        	
	 */
	public function mostraCartaoSelecionado(Cartao $cartao) {
		echo '	&lt;div class=&quot;borda&quot;&gt;
					Nome: ' . $cartao-&gt;getNumero () . '&lt;br&gt;
					Creditos: ' . $cartao-&gt;getCreditos () . '&lt;br&gt;
					Nome do Tipo: ' . $cartao-&gt;getTipo ()-&gt;getNome () . '
				&lt;/div&gt;';
	}
	
	/**
	 * Gera um formul&aacute;rio para busca pelo nome do Usu&aacute;rio.
	 */
	public function formBuscaUsuarios() {
		
		// ######### TESTE COMO root com autorizacao do Kleber
		echo '	&lt;script language=&quot;javascript&quot;&gt;
					function altera() {
				  		document.getElementById(&quot;botao&quot;).value=&quot;AGUARDE! Pesquisando...&quot;;				
					}
				&lt;/script&gt;';
		// ####################
		echo '	&lt;div class=&quot;borda&quot;&gt;
					&lt;form method=&quot;get&quot; action=&quot;&quot; class=&quot;formulario em-linha&quot; &gt;
						&lt;label for=&quot;opcoes-1&quot;&gt;
							&lt;object class=&quot;rotulo texto-preto&quot;&gt;Nome do Usuario: &lt;/object&gt;
							&lt;input class=&quot;texto-preto&quot; type=&quot;text&quot; name=&quot;nome&quot; id=&quot;campo-texto&quot; /&gt;&lt;br&gt;										
						&lt;/label&gt;
						&lt;input type=&quot;hidden&quot; name=&quot;pagina&quot; value=&quot;cartao&quot; /&gt;						
						&lt;input id=&quot;botao&quot; onclick=&quot;altera();&quot; type=&quot;submit&quot; value=&quot;Buscar&quot;/&gt;
					&lt;/form&gt;
				&lt;/div&gt;';
	}
	
	/**
	 */
	public function formBuscaVinculo() {
		echo '	&lt;div class=&quot;borda&quot;&gt;
					&lt;form method=&quot;get&quot; action=&quot;&quot; class=&quot;formulario em-linha&quot; &gt;
						&lt;label for=&quot;parametro&quot;&gt;Buscar por:&lt;/label&gt;
						&lt;select name=&quot;parametro&quot; id=&quot;parametro&quot; class=&quot;texto-preto&quot;&gt;
							&lt;option value=&quot;1&quot;&gt;Nome do Usu&aacute;rio&lt;/option&gt;
						&lt;/select&gt;';
		if (isset ( $_GET ['filtro_data'] ))
			echo '		&lt;input type=&quot;hidden&quot; name=&quot;filtro_data&quot; value=&quot;' . $_GET ['filtro_data'] . '&quot;/&gt;
						&lt;input class=&quot;texto-preto&quot; type=&quot;text&quot; name=&quot;busca_vinculos&quot; id=&quot;busca_vinculos&quot; /&gt;&lt;br&gt;
						&lt;input type=&quot;submit&quot; /&gt;
					&lt;/form&gt;
				&lt;/div&gt;';
	}
	
	/**
	 */
	public function formBuscaVinculoIsencao() {
		echo '	&lt;div class=&quot;borda&quot;&gt;
					&lt;form method=&quot;get&quot; action=&quot;&quot; class=&quot;formulario em-linha&quot; &gt;	
						&lt;label for=&quot;parametro&quot;&gt;Buscar por:&lt;/label&gt;
						&lt;select name=&quot;parametro&quot; id=&quot;parametro&quot; class=&quot;texto-preto&quot;&gt;
							&lt;option value=&quot;1&quot;&gt;Nome do Usu&aacute;rio&lt;/option&gt;
						&lt;/select&gt;';
		if (isset ( $_GET ['filtro_data_isen'] ))
			echo '		&lt;input type=&quot;hidden&quot; name=&quot;filtro_data_isen&quot; value=&quot;' . $_GET ['filtro_data_isen'] . '&quot;/&gt;
						&lt;input class=&quot;texto-preto&quot; type=&quot;text&quot; name=&quot;busca_vinculos_isen&quot; id=&quot;busca_vinculos_isen&quot; /&gt;&lt;br&gt;
						&lt;input type=&quot;submit&quot; /&gt;
					&lt;/form&gt;
				&lt;/div&gt;';
	}
	
	/**
	 */
	public function filtroData() {
		$dataHoje = date ( 'Y-m-d' ) . 'T' . date ( 'H:00:01' );
		echo '	&lt;div class=&quot;borda&quot;&gt;
					&lt;form method=&quot;get&quot; action=&quot;&quot; class=&quot;formulario em-linha&quot; &gt;
						&lt;label for=&quot;filtro_data&quot;&gt;Filtro de Data:&lt;/label&gt;
						&lt;input class=&quot;texto-preto&quot; value=&quot;' . $dataHoje . '&quot; type=&quot;datetime-local&quot; name=&quot;filtro_data&quot; id=&quot;filtro_data&quot; /&gt;&lt;br&gt;';
		if (isset ( $_GET ['busca_vinculos'] ))
			echo '		&lt;input type=&quot;hidden&quot; name=&quot;busca_vinculos&quot; value=&quot;' . $_GET ['busca_vinculos'] . '&quot;/&gt;
						&lt;input type=&quot;submit&quot; /&gt;
					&lt;/form&gt;
				&lt;/div&gt;';
	}
	
	/**
	 */
	public function filtroDataIsencao() {
		$dataHoje = date ( 'Y-m-d' ) . 'T' . date ( 'H:00:01' );
		echo '	&lt;div class=&quot;borda&quot;&gt;
					&lt;form method=&quot;get&quot; action=&quot;&quot; class=&quot;formulario em-linha&quot; &gt;
						&lt;label for=&quot;filtro_data_isen&quot;&gt;Filtro de Data:&lt;/label&gt;
						&lt;input class=&quot;texto-preto&quot; value=&quot;' . $dataHoje . '&quot; type=&quot;datetime-local&quot; name=&quot;filtro_data_isen&quot; id=&quot;filtro_data_isen&quot; /&gt;&lt;br&gt;';
		if (isset ( $_GET ['busca_vinculos_isen'] ))
			echo '		&lt;input type=&quot;hidden&quot; name=&quot;busca_vinculos_isen&quot; value=&quot;' . $_GET ['busca_vinculos_isen'] . '&quot;/&gt;
						&lt;input type=&quot;submit&quot; /&gt;
					&lt;/form&gt;
				&lt;/div&gt;';
	}
	
	/**
	 * Exibe as informa&ccedil;&otilde;es do Usuario consultado atrav&eacute;s do nome.
	 * Chama a fun&ccedil;&atilde;o mostraLinhaDaBusca() dentro da mesma Classe,
	 * contendo o restante tabela com os dados dos usu&aacute;rio.
	 *
	 * @param array $usuarios
	 *        	Usuarios Consultados.
	 */
	public function mostraResultadoBuscaDeUsuarios($usuarios) {
		echo '	&lt;h2 class=&quot;titulo&quot;&gt;Resultado da busca:&lt;/h2&gt;';
		echo '	&lt;div class=&quot;doze colunas&quot;&gt;';
		echo '	&lt;div class=&quot;borda&quot;&gt;
					&lt;table class=&quot;tabela borda-vertical zebrada texto-preto&quot;&gt;
						&lt;thead&gt;
							&lt;tr&gt;
					        	&lt;th&gt;Nome&lt;/th&gt;
					        	&lt;th&gt;CPF&lt;/th&gt;
					        	&lt;th&gt;Passaporte&lt;/th&gt;
					        	&lt;th&gt;Status Discente&lt;/th&gt;
								&lt;th&gt;Status Servidor&lt;/th&gt;
								&lt;th&gt;Tipo de Usuario&lt;/th&gt;
					        	&lt;th&gt;Selecionar&lt;/th&gt;
					        &lt;/tr&gt;
					    &lt;/thead&gt;
						&lt;tbody&gt;';
		foreach ( $usuarios as $usuario ) {
			$this-&gt;mostraLinhaDaBusca ( $usuario );
		}
		echo '			&lt;/tbody&gt;
					&lt;/table&gt;
				&lt;/div&gt;';
	}
	
	/**
	 * Fun&ccedil;&atilde;o ulilizada para gerar uma tabela com a pesquisa
	 * realizada com o nome do Usuario.
	 *
	 * @param Usuario $usuario        	
	 */
	public function mostraLinhaDaBusca(Usuario $usuario) {
		echo '	&lt;tr&gt;';
		echo '		&lt;td&gt;' . $usuario-&gt;getNome () . '&lt;/a&gt;&lt;/td&gt;';
		echo '		&lt;td&gt;' . $usuario-&gt;getCpf () . '&lt;/td&gt;';
		echo '		&lt;td&gt;' . $usuario-&gt;getPassaporte () . '&lt;/td&gt;';
		echo '		&lt;td&gt;' . $usuario-&gt;getStatusDiscente () . '&lt;/td&gt;';
		echo '		&lt;td&gt;' . $usuario-&gt;getStatusServidor () . '&lt;/td&gt;';
		echo '		&lt;td&gt;' . $usuario-&gt;getTipodeUsuario () . '&lt;/td&gt;';
		echo '		&lt;td class=&quot;centralizado&quot;&gt;&lt;a href=&quot;?pagina=cartao&amp;selecionado=' . $usuario-&gt;getIdBaseExterna () . '&quot;&gt;&lt;span class=&quot;icone-checkmark texto-verde2 botao&quot; title=&quot;Selecionar&quot;&gt;&lt;/span&gt;&lt;/a&gt;&lt;/td&gt;';
		echo '	&lt;/tr&gt;';
	}
	
	/**
	 * Exibe os dados do usu&aacute;rio selecionado, depois da pesquisa pelo nome.
	 *
	 * @param Usuario $usuario        	
	 */
	public function mostraSelecionado(Usuario $usuario) {
		echo '	&lt;div class=&quot;doze colunas borda&quot;&gt;';
		
		// Descomente esta linha para ativar o bot&atilde;o para cadastrar foto.
		// echo '&lt;a href=&quot;?pagina=cartao&amp;selecionado='.$_GET['selecionado'].'&amp;foto=1&quot; class=&quot;botao&quot;&gt;Adicionar Foto&lt;/a&gt;';
		
		if (isset ( $_GET ['foto'] )) {
			
			echo '	&lt;div class=&quot;doze colunas fotos&quot;&gt;
					    &lt;div class=&quot;quatro colunas&quot;&gt;
							&lt;div class=&quot;borda-foto&quot;&gt;								
								&lt;div class=&quot;foto-salva&quot;&gt;';
			
			if (file_exists ( 'fotos/' . $_GET ['selecionado'] . '.png' )) {
				echo '			&lt;img src=&quot;fotos/' . $_GET ['selecionado'] . '.png&quot; /&gt;';
			} else {
				echo '			&lt;img src=&quot;img/camera.png&quot; /&gt;';
			}
			
			echo '				&lt;/div&gt;
							&lt;/div&gt;
						&lt;/div&gt;
	
					    &lt;div class=&quot;quatro colunas&quot;&gt;
							&lt;div class=&quot;borda-foto&quot;&gt;								
								&lt;img id=&quot;marcacao&quot; src=&quot;img/avatar.png&quot;/&gt;								
					        	&lt;div class=&quot;tela&quot;&gt;									
									&lt;video width=&quot;320&quot; height=&quot;200&quot; id=&quot;video&quot; autoplay&gt;&lt;/video&gt;
					        	&lt;/div&gt;
								&lt;div class=&quot;centralizado&quot;&gt;	
					                &lt;button id=&quot;btnStart&quot; class=&quot;botao icone-switch title=&quot;Ligar C&acirc;mera&quot;&gt;&lt;/button&gt;
					                &lt;button id=&quot;btnStop&quot; class=&quot;botao icone-cross&quot;&gt;&lt;/button&gt;
					                &lt;button id=&quot;btnPhoto&quot; class=&quot;botao icone-camera&quot;&gt;&lt;/button&gt;
									&lt;button id=&quot;btnUser&quot; class=&quot;botao icone-user&quot;&gt;&lt;/button&gt;
								&lt;/div&gt;
							&lt;/div&gt;
					    &lt;/div&gt;
	
					    &lt;div class=&quot;quatro colunas&quot;&gt;
							&lt;div class=&quot;borda-foto &quot;&gt;
								&lt;div class=&quot;foto-salva&quot;&gt;
							    	&lt;canvas id=&quot;canvas&quot; width=&quot;320&quot; height=&quot;240&quot;&gt;&lt;/canvas&gt;									
							    &lt;/div&gt;
								&lt;div class=&quot;centralizado&quot;&gt;
									&lt;form class=&quot;formulario&quot; id=&quot;formulario&quot; enctype=&quot;multipart/form-data&quot; action=&quot;enviar.php&quot; method=&quot;POST&quot; id=&quot;youform&quot; name=&quot;youform&quot;&gt;
								        &lt;input type=&quot;hidden&quot; name=&quot;MAX_FILE_SIZE&quot; value=&quot;30000&quot; /&gt;
								        &lt;input name=&quot;img64&quot; id=&quot;img64&quot; type=&quot;hidden&quot; /&gt;
								        &lt;input name=&quot;id_usuario&quot; id=&quot;id_usuario&quot; value=&quot;' . $_GET ['selecionado'] . '&quot; type=&quot;hidden&quot; /&gt;
								        &lt;input class=&quot;&quot; type=&quot;submit&quot; value=&quot;Enviar arquivo&quot; onsubmit=&quot;document.getElementById(\'img64\').value = img&quot; /&gt;
							        &lt;/form&gt;								   
							    &lt;/div&gt;
					    	&lt;/div&gt;
					    &lt;/div&gt;	
					&lt;/div&gt;
					&lt;hr class=&quot;um&quot;/&gt;';
		}
		
		echo '&lt;div class=&quot;doze colunas&quot;&gt;				
				&lt;table  class=&quot;tabela borda-vertical zebrada&quot;&gt;
					&lt;tr&gt;&lt;th&gt;Nome:&lt;/th&gt;&lt;td&gt; ' . $usuario-&gt;getNome () . '.&lt;/td&gt;';
		echo '
             		&lt;/tr&gt;
					&lt;tr&gt;&lt;th&gt;Login:&lt;/th&gt;&lt;td&gt;' . $usuario-&gt;getLogin () . '.&lt;/td&gt;&lt;/tr&gt;
					&lt;tr&gt;&lt;th&gt;Identidade: &lt;/th&gt;&lt;td&gt;' . $usuario-&gt;getIdentidade () . '.&lt;/td&gt;&lt;/tr&gt;
					&lt;tr&gt;&lt;th&gt;CPF:&lt;/th&gt;&lt;td&gt;' . $usuario-&gt;getCpf () . '.&lt;/tr&gt;
					&lt;tr&gt;&lt;/td&gt;&lt;th&gt;Passaporte:&lt;/th&gt;&lt;td&gt;' . $usuario-&gt;getPassaporte () . '&lt;/td&gt;&lt;/tr&gt;';
		
		if (strtolower ( trim ( $usuario-&gt;getStatusServidor () ) ) == 'ativo' &amp;&amp; strtolower ( trim ( $usuario-&gt;getCategoria () ) ) == 'docente') {
			echo '&lt;tr&gt;&lt;th&gt;Servidor &lt;/th&gt;&lt;td&gt;Docente&lt;/td&gt;&lt;/tr&gt;
					&lt;tr&gt;&lt;th&gt;SIAPE: &lt;/th&gt;&lt;td&gt;' . $usuario-&gt;getSiape () . '&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;';
		} else if (strtolower ( trim ( $usuario-&gt;getCategoria () ) ) == 'docente') {
			echo &quot;&lt;tr&gt;&lt;th&gt;Servidor &lt;/th&gt;&lt;td&gt;Docente Inativo&lt;/td&gt;&lt;/tr&gt;&quot;;
			echo '&lt;tr&gt;&lt;th&gt;SIAPE:&lt;/th&gt; &lt;td&gt;' . $usuario-&gt;getSiape () . '&lt;/td&gt;&lt;/tr&gt;';
		}
		if (strtolower ( trim ( $usuario-&gt;getStatusServidor () ) ) == 'ativo' &amp;&amp; strpos ( strtolower ( trim ( $usuario-&gt;getCategoria () ) ), 'administrativo' )) {
			echo &quot;&lt;tr&gt;&lt;th&gt;Servidor &lt;/th&gt;&lt;td&gt;TAE&lt;/td&gt;&lt;/tr&gt;&quot;;
			echo '&lt;tr&gt;&lt;th&gt;SIAPE:&lt;/th&gt;&lt;td&gt;' . $usuario-&gt;getSiape () . '&lt;/td&gt;&lt;/tr&gt;';
		} else if (strpos ( strtolower ( trim ( $usuario-&gt;getCategoria () ) ), 'administrativo' )) {
			echo &quot;&lt;tr&gt;&lt;th&gt;Servidor &lt;/th&gt;&lt;td&gt;TAE Inativo&lt;/td&gt;&lt;/tr&gt;&quot;;
			echo '&lt;tr&gt;&lt;th&gt;SIAPE:&lt;/th&gt;&lt;td&gt;' . $usuario-&gt;getSiape () . '&lt;/td&gt;&lt;/tr&gt;';
		}
		
		if (strtolower ( trim ( $usuario-&gt;getTipodeUsuario () ) ) == 'aluno') {
			if (strtolower ( trim ( $usuario-&gt;getStatusDiscente () ) ) == 'ativo') {
				echo '&lt;tr&gt;&lt;th&gt;Aluno &lt;/th&gt;&lt;td&gt;Ativo&lt;/td&gt;&lt;/tr&gt;';
			} else {
				echo '&lt;tr&gt;&lt;th&gt;Aluno &lt;/th&gt;&lt;td&gt;' . $usuario-&gt;getStatusDiscente () . '&lt;/td&gt;&lt;/tr&gt;';
			}
			echo '&lt;tr&gt;&lt;th&gt;Nivel Discente:&lt;/th&gt;&lt;td&gt; ' . $usuario-&gt;getNivelDiscente () . '&lt;/td&gt;&lt;/tr&gt;';
			echo '&lt;tr&gt;&lt;th&gt;Matricula:&lt;/th&gt;&lt;td&gt;' . $usuario-&gt;getMatricula () . '&lt;/td&gt;&lt;/tr&gt;';
		} else if (strtolower ( trim ( $usuario-&gt;getStatusDiscente () ) ) == 'ativo') {
			echo '&lt;tr&gt;&lt;th&gt;Aluno &lt;/th&gt;&lt;td&gt;Ativo&lt;/td&gt;&lt;/tr&gt;';
			echo '&lt;tr&gt;&lt;th&gt;Nivel Discente:&lt;/th&gt;&lt;td&gt; ' . $usuario-&gt;getNivelDiscente () . '&lt;/td&gt;&lt;/tr&gt;';
			echo '&lt;tr&gt;&lt;th&gt;Matricula:&lt;/th&gt;&lt;td&gt;' . $usuario-&gt;getMatricula () . '&lt;/td&gt;&lt;/tr&gt;';
		}
		
		if (strtolower ( trim ( $usuario-&gt;getTipodeUsuario () ) ) == 'terceirizado') {
			echo '&lt;tr&gt;&lt;th colspan=2&gt;Terceirizado Sem Informa&ccedil;&atilde;o de Status&lt;/th&gt;&lt;/tr&gt;';
		}
		
		echo '&lt;/table&gt;
				&lt;/div&gt;				
				&lt;/div&gt;';
	}
	
	/**
	 * Exibe uma tabela com os vinculos do usu&aacute;rio selecionado.
	 * Chama a fun&ccedil;&atilde;o mostraLinhaVinculo() dentro da mesma Classe,
	 * contendo o retante da tabela com os dados referentes aos vincunlos do usu&aacute;rio selecionado.
	 *
	 * @param array $lista        	
	 * @param string $podeRenovar        	
	 */
	public function mostraVinculos($lista, $podeRenovar = true) {
		if (! count ( $lista )) {
			echo '&lt;div class=&quot;borda&quot;&gt;&lt;p&gt;Nenhum &iacute;tem na lista&lt;/p&gt;&lt;/div&gt;';
			return;
		}
		echo '&lt;div class=&quot;borda&quot;&gt;
						&lt;table class=&quot;tabela borda-vertical zebrada texto-preto&quot;&gt;';
		echo '&lt;tr&gt;
								&lt;th&gt;Avulso&lt;/th&gt;
								&lt;th&gt;Respons&aacute;vel&lt;/th&gt;
								&lt;th&gt;Tipo&lt;/th&gt;
								&lt;th&gt;Cart&atilde;o&lt;/th&gt;
								&lt;th&gt;Validade&lt;/th&gt;
								&lt;th&gt;Isento&lt;/th&gt;
				';
		
		if ($podeRenovar)
			echo '&lt;th&gt;-&lt;/th&gt;';
		echo '
							&lt;/tr&gt;';
		foreach ( $lista as $vinculo ) {
			$this-&gt;mostraLinhaVinculo ( $vinculo, $podeRenovar );
		}
		echo '&lt;/table&gt;&lt;/div&gt;';
	}
	
	/**
	 * Gera uma tabela com infoma&ccedil;&otilde;es dos vinculos.
	 *
	 * @param Vinculo $vinculo
	 *        	Vinculos do Usu&aacute;rio.
	 * @param string $podeRenovar
	 *        	Verifica se o vinculo &eacute; passivel de renova&ccedil;&atilde;o.
	 */
	public function mostraLinhaVinculo(Vinculo $vinculo, $podeRenovar = true) {
		echo '&lt;tr&gt;';
		if ($vinculo-&gt;isAvulso ())
			echo '&lt;td&gt;Sim&lt;/td&gt;';
		else
			echo '&lt;td&gt;N&atilde;o&lt;/td&gt;';
		
		echo '
				&lt;td&gt;' . $vinculo-&gt;getResponsavel ()-&gt;getNome () . '&lt;/td&gt;
				&lt;td&gt;' . $vinculo-&gt;getCartao ()-&gt;getTipo ()-&gt;getNome () . '&lt;/td&gt;
				&lt;td&gt;' . $vinculo-&gt;getCartao ()-&gt;getNumero () . '&lt;/td&gt;
				&lt;td&gt;' . date ( &quot;d/m/Y G:i:s&quot;, strtotime ( $vinculo-&gt;getFinalValidade () ) ) . '&lt;/td&gt;';
		if ($vinculo-&gt;getIsencao ()-&gt;getId ())
			echo '&lt;td&gt;Sim&lt;/td&gt;';
		else
			echo '&lt;td&gt;N&atilde;o&lt;/td&gt;';
		
		if ($vinculo-&gt;isActive ())
			echo '&lt;td&gt;&lt;a href=&quot;?pagina=cartao&amp;selecionado=' . $vinculo-&gt;getResponsavel ()-&gt;getIdBaseExterna () . '&amp;vinculo_cancelar=' . $vinculo-&gt;getId () . '&quot; class=&quot;botao&quot;&gt;Cancelar&lt;/a&gt;&lt;/td&gt;';
		else {
			if ($podeRenovar)
				echo '&lt;td&gt;&lt;a href=&quot;?pagina=cartao&amp;selecionado=' . $vinculo-&gt;getResponsavel ()-&gt;getIdBaseExterna () . '&amp;vinculo_renovar=' . $vinculo-&gt;getId () . '&quot; class=&quot;botao&quot;&gt;Renovar&lt;/a&gt;&lt;/td&gt;';
		}
		
		echo '&lt;/tr&gt;';
	}
	
	/**
	 * Formul&aacute;rio para confirma&ccedil;&atilde;o de inclus&atilde;o de vinculo do cart&atilde;o ao usu&aacute;rio.
	 *
	 * @param Usuario $usuario        	
	 * @param string $numeroCartao        	
	 * @param Tipo $tipo        	
	 */
	public function formConfirmacaoEnvioVinculo(Usuario $usuario, $numeroCartao, Tipo $tipo) {
		echo '	&lt;div class=&quot;borda doze colunas&quot;&gt;';
		echo '		&lt;p&gt;Tem certeza que deseja adicionar o cart&atilde;o ' . $numeroCartao . ' para o usuario ' . $usuario-&gt;getNome () . ' com o tipo ' . $tipo-&gt;getNome () . '? &lt;/p&gt;';
		echo '			&lt;form action=&quot;&quot; method=&quot;post&quot;&gt;
							&lt;input type=&quot;submit&quot; class=&quot;botao&quot; value=&quot;certeza&quot; name=&quot;enviar_vinculo&quot;/&gt;
				
				&lt;		/form&gt;';
		
		echo '&lt;/div&gt;';
	}
	
	/**
	 * Formul&aacute;rio para confirma&ccedil;&atilde;o de cancelamento do vinculo do cart&atilde;o ao usu&aacute;rio.
	 * Ap&oacute;s a confima&ccedil;&atilde;o o vinculo n&atilde;o ser&aacute; exclu&iacute;do, ser&aacute; tornado inv&aacute;lido.
	 *
	 * @param Vinculo $vinculo        	
	 */
	public function formConfirmacaoEliminarVinculo(Vinculo $vinculo) {
		echo '	&lt;div class=&quot;borda doze colunas&quot;&gt;';
		$this-&gt;formMensagem ( &quot;-ajuda&quot;, &quot;Deseja eliminar esse v&iacute;nculo?&quot; );
		echo '		&lt;form action=&quot;&quot; method=&quot;post&quot;&gt;
						&lt;input type=&quot;submit&quot; class=&quot;botao&quot; value=&quot;Confirmar&quot; name=&quot;certeza&quot; /&gt;	
					&lt;/form&gt;
				&lt;/div&gt;';
	}
	
	/**
	 * Formul&aacute;rio para confirma&ccedil;&atilde;o de renova&ccedil;&atilde;o de v&iacute;nculo.
	 */
	public function formConfirmacaoRenovarVinculo() {
		$this-&gt;formMensagem ( &quot;-ajuda&quot;, &quot;Tem certeza que deseja renovar esse v&iacute;nculo?&quot; );
		echo '	&lt;form id=&quot;form-confirma-cartao&quot; action=&quot;&quot; method=&quot;post&quot;&gt;
					&lt;input type=&quot;submit&quot; class=&quot;botao&quot; value=&quot;certeza&quot; name=&quot;certeza&quot; /&gt;	
				&lt;/form&gt;';
	}
	
	/**
	 * Formul&aacute;rio contendo os dados do v&iacute;nculo a ser inserido.
	 *
	 * @param array $listaDeTipos
	 *        	Tipo de Vinculos poss&iacute;veis.
	 * @param int $idSelecionado
	 *        	Id do usu&aacute;rio a receber o vinculo.
	 */
	public function mostraFormAdicionarVinculo($listaDeTipos, $idSelecionado) {
		$daqui3Meses = date ( 'Y-m-d', strtotime ( &quot;+60 days&quot; ) ) . 'T' . date ( 'H:00:01' );
		$dataHoje = date ( 'Y-m-d' ) . 'T' . date ( 'H:00:01' );
		if (isset ( $_SESSION ['ultima_hora_inserida'] )) {
			$daqui3Meses = $_SESSION ['ultima_hora_inserida'];
		}
		echo '
				&lt;script&gt;
				  $(document).bind(\'autofocus_ready\', function() {
				    if (!(&quot;autofocus&quot; in document.createElement(&quot;input&quot;))) {
				      $(&quot;#numero_cartao2&quot;).focus();
				    }
				  });
				&lt;/script&gt;';
		echo '&lt;div class=&quot;doze colunas borda&quot;&gt;				
				&lt;form method=&quot;get&quot; action=&quot;&quot; class=&quot;formulario texto-preto&quot; &gt;
						    &lt;label for=&quot;numero_cartao2&quot;&gt;N&uacute;mero do Cart&atilde;o&lt;/label&gt;
								&lt;input type=&quot;text&quot; name=&quot;numero_cartao2&quot; id=&quot;numero_cartao2&quot; autofocus/&gt;
								 &lt;script&gt;$(document).trigger(\'autofocus_ready\');&lt;/script&gt;
						     &lt;label for=&quot;id_tipo&quot;&gt;Tipo&lt;/label&gt;
						       &lt;select id=&quot;id_tipo&quot; name=&quot;id_tipo&quot;&gt;';
		foreach ( $listaDeTipos as $tipo ) {
			echo '&lt;option value=&quot;' . $tipo-&gt;getId () . '&quot;&gt;' . $tipo-&gt;getNome () . '&lt;/option&gt;';
		}
		echo '

			        &lt;/select&gt;
				&lt;input type=&quot;hidden&quot; name=&quot;pagina&quot;  value=&quot;cartao&quot;/&gt;
				&lt;input type=&quot;hidden&quot; name=&quot;cartao&quot;  value=&quot;add&quot;/&gt;
				&lt;input type=&quot;hidden&quot; name=&quot;selecionado&quot;  value=&quot;' . $idSelecionado . '&quot;/&gt;
			   &lt;br&gt; 	&lt;input  type=&quot;submit&quot;  name=&quot;salvar&quot; value=&quot;Salvar&quot;/&gt;
			&lt;/form&gt;
			&lt;/div&gt;';
	}
	
	/**
	 * Exibe uma mensagem de sucesso na inclus&atilde;o do vinculo.
	 *
	 * @param string $mensagem        	
	 */
	public function mostraSucesso($mensagem) {
		echo '&lt;div class=&quot;borda&quot;&gt;&lt;p&gt;' . $mensagem . '&lt;/p&gt;&lt;/div&gt;';
	}
	
	/**
	 * Exibe informa&ccedil;&otilde;es detalhada do V&iacute;nculo.
	 *
	 * @param Vinculo $vinculo        	
	 */
	public function mostrarVinculoDetalhe(Vinculo $vinculo) {
		echo '&lt;div class=&quot;doze linhas&quot;&gt;';
		echo '&lt;br&gt;&lt;h2 class=&quot;texto-preto&quot;&gt;Vinculo Selecionado:&lt;/h2&gt;';
		echo '&lt;/div&gt;';
		echo '&lt;div class=&quot;borda&quot;&gt;';
		if ($vinculo-&gt;isAvulso ())
			echo '&lt;p&gt;Avulso&lt;/p&gt;';
		echo '&lt;p&gt;Respons&aacute;vel: ' . ucwords ( strtolower ( $vinculo-&gt;getResponsavel ()-&gt;getNome () ) ) . '&lt;/p&gt;';
		echo '&lt;p&gt;Cart&atilde;o: ' . $vinculo-&gt;getCartao ()-&gt;getNumero () . '&lt;/p&gt;';
		echo '&lt;p&gt;Cr&eacute;ditos no Cart&atilde;o: R$' . number_format ( $vinculo-&gt;getCartao ()-&gt;getCreditos (), 2, ',', '.' ) . '&lt;/p&gt;';
		echo '&lt;p&gt;Tipo de V&iacute;nculo: ' . $vinculo-&gt;getCartao ()-&gt;getTipo ()-&gt;getNome () . '&lt;/p&gt;';
		echo '&lt;p&gt;Refei&ccedil;&otilde;es Por Turno: ' . $vinculo-&gt;getQuantidadeDeAlimentosPorTurno () . '&lt;/p&gt;';
		
		if ($vinculo-&gt;isActive ()) {
			echo '&lt;p&gt;Vinculo ativo&lt;/p&gt;';
			echo '&lt;p&gt;In&iacute;cio do V&iacute;nculo: ' . date ( 'd/m/Y H:i:s', strtotime ( $vinculo-&gt;getInicioValidade () ) ) . '&lt;/p&gt;';
			echo '&lt;p&gt;Fim do V&iacute;nculo: ' . date ( 'd/m/Y H:i:s', strtotime ( $vinculo-&gt;getFinalValidade () ) ) . '&lt;/p&gt;';
			
			echo '&lt;a class=&quot;botao b-erro&quot; href=&quot;?pagina=cartao&amp;vinculoselecionado=' . $vinculo-&gt;getId () . '&amp;deletar=1&quot;&gt;Eliminar V&iacute;nculo&lt;/a&gt;';
		} else {
			echo '&lt;p&gt;Vinculo inativo&lt;/p&gt;';
			echo '&lt;p&gt;In&iacute;cio do V&iacute;nculo: ' . date ( 'd/m/Y H:i:s', strtotime ( $vinculo-&gt;getInicioValidade () ) ) . '&lt;/p&gt;';
			echo '&lt;p&gt;Fim do V&iacute;nculo: ' . date ( 'd/m/Y H:i:s', strtotime ( $vinculo-&gt;getFinalValidade () ) ) . '&lt;/p&gt;';
			echo '&lt;a class=&quot;botao b-erro&quot; href=&quot;?pagina=cartao&amp;vinculoselecionado=' . $vinculo-&gt;getId () . '&amp;reativar=1&quot;&gt;Reativar V&iacute;nculo&lt;/a&gt;';
		}
		
		echo '&lt;/div&gt;';
	}
	
	/**
	 * Exibe informa&ccedil;&otilde;es detalhada do V&iacute;nculo Isento.
	 *
	 * @param Vinculo $vinculo        	
	 */
	public function mostraIsencaoDoVinculo(Vinculo $vinculo) {
		echo '&lt;div class=&quot;doze linhas&quot;&gt;';
		echo '&lt;br&gt;&lt;h2 class=&quot;texto-preto&quot;&gt;Vinculo Selecionado:&lt;/h2&gt;';
		echo '&lt;/div&gt;';
		echo '&lt;div class=&quot;borda&quot;&gt;';
		if ($vinculo-&gt;getIsencao ()-&gt;getId ()) {
			$tempoA = strtotime ( $vinculo-&gt;getIsencao ()-&gt;getDataDeInicio () );
			$tempoB = strtotime ( $vinculo-&gt;getIsencao ()-&gt;getDataFinal () );
			$tempoAgora = time ();
			if ($tempoAgora &gt; $tempoA &amp;&amp; $tempoAgora &lt; $tempoB) {
				echo '&lt;p&gt;Isen&ccedil;&atilde;o ativa&lt;/p&gt;';
				echo '&lt;p&gt;In&iacute;cio da Isen&ccedil;&atilde;o: ' . date ( 'd/m/Y H:i:s', strtotime ( $vinculo-&gt;getIsencao ()-&gt;getDataDeInicio () ) ) . '&lt;/p&gt;';
				echo '&lt;p&gt;Fim da Isen&ccedil;&atilde;oo: ' . date ( 'd/m/Y H:i:s', strtotime ( $vinculo-&gt;getIsencao ()-&gt;getDataFinal () ) ) . '&lt;/p&gt;';
				echo '&lt;a href=&quot;?pagina=cartao&amp;vinculoselecionado=' . $vinculo-&gt;getId () . '&amp;delisencao=1&quot;&gt;Eliminar Isen&ccedil;&atilde;o&lt;/a&gt;';
			} else if ($tempoAgora &lt; $tempoB) {
				echo '&lt;p&gt;Isen&ccedil;&atilde;o no Futuro&lt;/p&gt;';
				echo '&lt;p&gt;Inicio da Isen&ccedil;&atilde;o: ' . date ( 'd/m/Y H:i:s', strtotime ( $vinculo-&gt;getIsencao ()-&gt;getDataDeInicio () ) ) . '&lt;/p&gt;';
				echo '&lt;p&gt;Fim da Isen&ccedil;&atilde;o: ' . date ( 'd/m/Y H:i:s', strtotime ( $vinculo-&gt;getIsencao ()-&gt;getDataFinal () ) ) . '&lt;/p&gt;';
				echo '&lt;p&gt;&lt;a href=&quot;?pagina=cartao&amp;vinculoselecionado=' . $vinculo-&gt;getId () . '&amp;delisencao=1&quot;&gt;Eliminar Isen&ccedil;&atilde;o&lt;/a&gt;&lt;/p&gt;';
			} else {
				echo '&lt;p&gt;Isen&ccedil;&atilde;o inativa&lt;/p&gt;';
			}
		}
		echo '&lt;/div&gt;';
	}
	
	/**
	 * Formul&aacute;rio contendo os dados do V&iacute;nculo Isento a ser inserido.
	 *
	 * @param int $idSelecionado        	
	 */
	public function formAdicionarIsencao($idSelecionado) {
		$daqui3Meses = date ( 'Y-m-d', strtotime ( &quot;+60 days&quot; ) ) . 'T' . date ( 'H:00:01' );
		$hoje = date ( 'Y-m-d' ) . 'T' . date ( 'H:00:01' );
		
		echo '&lt;div class=&quot;borda&quot;&gt;
				&lt;form method=&quot;post&quot; action=&quot;&quot; class=&quot;formulario sequencial texto-preto&quot; &gt;
					
						    &lt;label for=&quot;isen_inicio&quot;&gt;In&iacute;cio:&lt;/label&gt;
						         &lt;input id=&quot;isen_inicio&quot; type=&quot;datetime-local&quot; name=&quot;isen_inicio&quot; value=&quot;' . $hoje . '&quot; /&gt;
				    	    &lt;label for=&quot;isen_fim&quot;&gt;Fim:&lt;/label&gt;
						         &lt;input id=&quot;isen_fim&quot; type=&quot;datetime-local&quot; name=&quot;isen_fim&quot; value=&quot;' . $daqui3Meses . '&quot; /&gt;
							&lt;input type=&quot;hidden&quot; name=&quot;id_card&quot;  value=&quot;' . $idSelecionado . '&quot;/&gt;
			   &lt;br&gt; &lt;br&gt;	&lt;input  type=&quot;submit&quot;  name=&quot;salve_isencao&quot; value=&quot;Salvar&quot;/&gt;
			&lt;/form&gt;
			&lt;/div&gt;';
	}
	
	/**
	 *
	 * @ignore
	 *
	 * @param unknown $idSelecionado        	
	 */
	public function formAdicionarCreditos($idSelecionado) {
		$daqui3Meses = date ( 'Y-m-d', strtotime ( &quot;+60 days&quot; ) ) . 'T' . date ( 'H:00:01' );
		$hoje = date ( 'Y-m-d' ) . 'T' . date ( 'H:00:01' );
		
		echo '&lt;div class=&quot;borda&quot;&gt;
				&lt;form method=&quot;post&quot; action=&quot;&quot; class=&quot;formulario sequencial texto-preto&quot; &gt;
			
						   
				    	    &lt;label for=&quot;valor_creditos&quot;&gt;Valor A Adicionar:&lt;/label&gt;
						         &lt;input id=&quot;valor_creditos&quot; type=&quot;number&quot;  max=&quot;100&quot;  name=&quot;valor_creditos&quot; step=&quot;0.01&quot; value=&quot;1.6&quot; /&gt;
							&lt;input type=&quot;hidden&quot; name=&quot;id_card&quot;  value=&quot;' . $idSelecionado . '&quot;/&gt;
			   &lt;br&gt; &lt;br&gt;	&lt;input  type=&quot;submit&quot;  name=&quot;salve_creditos&quot; value=&quot;Salvar&quot;/&gt;
			&lt;/form&gt;
			&lt;/div&gt;';
	}
	
	/**
	 * Exibe informa&ccedil;&otilde;es do Usu&aacute;rio.
	 *
	 * @param Cartao $cartao        	
	 * @param Usuario $usuario        	
	 * @param Tipo $tipo        	
	 * @param string $imagem        	
	 */
	public function formIdentificacao(Cartao $cartao, Usuario $usuario, Tipo $tipo, $imagem) {
		echo '	&lt;div class=&quot;borda doze colunas&quot;&gt;
								
						&lt;div class=&quot;doze colunas dados-usuario&quot;&gt;		
							&lt;h2 class=&quot;titulo centralizado&quot;&gt;Identifica&ccedil;&atilde;o do Usuario&lt;/h1&gt;&lt;br&gt;				
							&lt;hr class=&quot;um&quot;&gt;
							&lt;div class=&quot;nove colunas&quot;&gt;
								&lt;div id=&quot;informacao&quot; class=&quot;fundo-cinza1&quot;&gt;
										&lt;div id=&quot;dados&quot; class=&quot;dados&quot;&gt;
										&lt;p&gt;Cart&atilde;o: &lt;strong&gt;' . $cartao-&gt;getNumero () . '&lt;/strong&gt;&lt;/p&gt;
										&lt;p&gt;Nome: &lt;strong&gt;' . ucwords ( strtolower ( htmlentities ( $usuario-&gt;getNome () ) ) ) . '&lt;/strong&gt;&lt;/p&gt;
										&lt;p&gt;Tipo: &lt;strong&gt;' . $tipo-&gt;getNome () . '&lt;/strong&gt;&lt;/p&gt;
									&lt;/div&gt;
								&lt;/div&gt;
							&lt;/div&gt;
							&lt;div class=&quot;tres colunas zoom&quot;&gt;
								&lt;img id=&quot;imagem&quot; src=&quot;fotos/' . $imagem . '.png&quot; alt=&quot;&quot;&gt;
							&lt;/div&gt;
						&lt;/div&gt;
					&lt;/div&gt;';
	}
	
	/**
	 * Mostra um mesnsagem para o Usu&aacute;rio:
	 *
	 * @param string $tipo
	 *        	Tipo de mensagem: &quot;-sucesso&quot;, &quot;-erro&quot;, &quot;-ajuda&quot;.
	 * @param string $texto
	 *        	Mensagem a ser exibida para o Usu&aacute;rio.
	 */
	public function formMensagem($tipo, $texto) {
		// Tipo = -sucesso, -erro, -ajuda
		echo '		&lt;div class=&quot;alerta' . $tipo . '&quot;&gt;
				    	&lt;div class=&quot;icone icone-notification ix16&quot;&gt;&lt;/div&gt;
				    	&lt;div class=&quot;titulo-alerta&quot;&gt;Aten&amp;ccedil&amp;atildeo&lt;/div&gt;
				    	&lt;div class=&quot;subtitulo-alerta&quot;&gt;' . $texto . '&lt;/div&gt;
					&lt;/div&gt;';
	}
}

?&gt;
</pre>
        <script type="text/javascript">
             SyntaxHighlighter.all();
             jQuery('.gutter div').each(function(key, data){
                jQuery(data).prepend('<a name="L'+jQuery(data).text()+'"/>');
             });
        </script>
    </body>
</html>